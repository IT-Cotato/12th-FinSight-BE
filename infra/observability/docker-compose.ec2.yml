services:
  prometheus-config:
    environment:
      - ENVIRONMENT=production

  prometheus:
    ports:
      - "127.0.0.1:9090:9090"
    extra_hosts:
      - "host.docker.internal:host-gateway"

  # Grafana Cloud 사용으로 로컬 Grafana 비활성화
  grafana:
    profiles:
      - disabled

  # Promtail EC2 오버라이드
  promtail-config:
    environment:
      - ENVIRONMENT=production

  promtail:
    volumes:
      - promtail_config:/etc/promtail:ro
      - /var/log:/var/log:ro
      - /var/lib/docker/containers:/var/lib/docker/containers:ro
